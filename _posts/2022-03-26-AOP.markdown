---
layout: post 
title:  "Spring AOP ê´€ì ì§€í–¥ í”„ë¡œê·¸ë˜ë°"
date:   2022-03-25 12:05:21 +0800 
tags: ìŠ¤í”„ë§ 
color: rgb(98,170,255)
subtitle: AOP
--- 

## ğŸš€ ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°

`Spring Application`ì€ íŠ¹ë³„í•œ ê²½ìš°ë¥¼ ì œì™¸í•˜ê³  MVC ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì—ì„œëŠ”
`Web Layer` / `Business Layer` / `Data Layer`ë¡œ ì •ì˜í•œë‹¤.

- Web Layer
    - REST APIë¥¼ ì œê³µí•˜ë©°, Client ì¤‘ì‹¬ì˜ ë¡œì§ ì ìš©


- Business Layer
    - ë‚´ë¶€ ì •ì±…ì— ë”°ë¥¸ logicë¥¼ ê°œë°œí•˜ë©°, ì£¼ë¡œ í•´ë‹¹ ë¶€ë¶„ì„ ê°œë°œ


- Data Layer
    - ë°ì´í„° ë² ì´ìŠ¤ ë° ì™¸ë¶€ì™€ì˜ ì—°ë™ì„ ì²˜ë¦¬


ê·¸ë ‡ë‹¤ë©´ `AOP`ëŠ” ë¬´ì—‡ì¼ê¹Œ?

### ğŸŒ  íš¡ë‹¨ ê´€ì‹¬ì‚¬

ë‹¤ìˆ˜ì˜ ëª¨ë“ˆì— ê³µí†µì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ë¶€ë¶„ì´ ì¡´ì¬í•˜ë©°, ìš°ë¦¬ëŠ” ì´ê²ƒì„ íš¡ë‹¨ ê´€ì‹¬ì‚¬ ë¼ê³  ë§í•œë‹¤.

![029](https://user-images.githubusercontent.com/65659478/160230827-6d90b6ec-56fc-4dae-badc-5a2ac6c05262.jpg)

**ì´ëŸ¬í•œ ê´€ì‹¬ì‚¬ë“¤ ì‚¬ì´ì— ê°œë°œìê°€ ëª©ì ì„ ê°€ì§€ê³  ì„ì˜ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì£¼ì…í•  ìˆ˜ ìˆëŠ”ë° ì—¬ê¸°ì„œ ë“±ì¥í•˜ëŠ” ê°œë…ì´ `AOP`ì¸ ê²ƒì´ë‹¤.**

> ìŠ¤í”„ë§ DIê°€ ì˜ì¡´ì„± ì£¼ì…ì´ë¼ë©´, ìŠ¤í”„ë§ AOPëŠ” ë¡œì§ì˜ ì£¼ì…ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.
> 
>  <center>ì±…, ìŠ¤í”„ë§ ì…ë¬¸ì„ ìœ„í•œ ìë°” ê°ì²´ ì§€í–¥ì˜ ì›ë¦¬ì™€ ì´í•´</center>

![030](https://user-images.githubusercontent.com/65659478/160230970-432ed18d-3d73-487b-9653-891d5d9e027b.jpg)

### ğŸŒ  AOP ì˜ˆì œ

```java

//TODO: ê´€ì  í´ë˜ìŠ¤ ì„ ì–¸
@Aspect
@Component
public class ParameterAop {
    @Pointcut("execution(íŠ¹ì • í´ë˜ìŠ¤ í˜¹ì€ ë©”ì†Œë“œ)")
    private void cut() {
    }

    @Before("cut()")
    public void before(Jointposint jointposint) {
        
        //TODO: ë©”ì†Œë“œ ì´ë¦„ ì¶œë ¥ : ì‹¤í–‰ë˜ëŠ” ë©”ì†Œë“œì˜ íŠ¹ì • ì§€ì ì„ ì°¾ì•„ë‚¼ë•Œ í•™ì¸í•˜ëŠ” ë°©ë²• 
        MethodSignature methodSignature = (MethodSignature)jointposint.getSignature();
        Method method = methodSignature.getMethod();
        System.out.println(method);
        
        //TODO: @Pointcutì´ ì§€ì •í•œ ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— í˜„ì¬ ë©”ì†Œë“œê°€ ì‹¤í–‰ë¨
        Object[] args = jointposint.getArgs();

        for (Object obj : args) {
            System.out.println("before ë©”ì†Œë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.");
            System.out.println("type: " + obj.getClass().getSimpleName());
            System.out.println("value: " + obj);
        }
    }

    @AfterReturning(value = "cut()", returning = "object")
    public void after(Jointposint jointposint, Object object) {
        //TODO: @Pointcutì´ ì§€ì •í•œ ë©”ì†Œë“œê°€ ì‹¤í–‰ëœ ì´í›„ í˜„ì¬ ë©”ì†Œë“œê°€ ì‹¤í–‰ë¨
        System.out.println("after ë©”ì†Œë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.");
        System.out.println("return ì˜¤ë¸Œì íŠ¸: ");
        System.out.println(object);
    }
}

@RestController
@RequestMapping("/api")
public class RestApiController {
    @GetMapping("/get/{id}")
    public String get(@PathVariable Long id, @RequestParam String name) {
        System.out.println("get method ì‹¤í–‰!");
        return id + " " + name;
    }

    @PostMapping("/post")
    public User post(@RequestBody User user) {
        System.out.println("post method ì‹¤í–‰!");
        return user;
    }
}
```




## ğŸ§¾ Reference

- [ì±… - ìŠ¤í”„ë§ì„ ì…ë¬¸ì„ ìœ„í•œ ìë°” ê°ì²´ ì§€í–¥ì˜ ì›ë¦¬ì™€ ì´í•´](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=55641908)
- [í•œ ë²ˆì— ëë‚´ëŠ” Java/Spring ì›¹ ê°œë°œ ë§ˆìŠ¤í„° ì´ˆê²©ì°¨ íŒ¨í‚¤ì§€ Online.]()
- [ì±… - ìŠ¤í”„ë§ì„ ì…ë¬¸ì„ ìœ„í•œ ìë°” ê°ì²´ ì§€í–¥ì˜ ì›ë¦¬ì™€ ì´í•´](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=55641908)