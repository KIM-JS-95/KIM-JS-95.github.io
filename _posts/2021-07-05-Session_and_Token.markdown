---
layout: post
title:  "Session_and_Token"
date:   2021-06-8 14:05:21 +0800
tags: Security Token Session
color: rgb(154,133,255)
cover: '../assets/profile.jpeg'
subtitle: 'ë³´ì•ˆì—ì„œì˜ Session ê³¼ Token'
---

## Session vs Token

### Session

Session ê³¼ Cookie ì¸ì¦ ë°©ì‹ì€ í´ë¼ì´ì–¸íŠ¸ì˜ ì„¸ì…˜ ì €ì¥ì†Œë¥¼ ìš”êµ¬í•˜ë©° ë¡œê·¸ì¸ì‹œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ê³  Keyë¡œ 
ì‚¬ìš©ë˜ëŠ” ì„¸ì…˜ IDë¥¼ ìƒì„±í•œë‹¤. ì‚¬ìš©ì€ HTTP Headerì— ì„¸ì…˜ IDê°€ í¬í•¨ëœ Cookieì™€ í•¨ê»˜ í´ë¼ì´ì–¸íŠ¸ì—
ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì´ë¥¼ ì„¸ì…˜ ì €ì¥ì†Œì—ì„œ ë¹„êµí•˜ì—¬ ì¸ì¦ì´ ì™„ë£Œë˜ë©´ Requestì— ë”°ë¼ ì‘ë‹µì„ ìˆ˜í–‰í•œë‹¤.

- ìœ ì €ê°€ ë¡œê·¸ì¸ì„ í•˜ê³  ì„¸ì…˜ì´ ì„œë²„ ë©”ëª¨ë¦¬ ìƒì— ì €ì¥ëœë‹¤. ì´ ë•Œ ì„¸ì…˜ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ Session Id ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.
- ë¸Œë¼ìš°ì €ì— ì¿ í‚¤ë¡œ Session Id ê°€ ì €ì¥ëœë‹¤.
- ì¿ í‚¤ì— ì •ë³´ê°€ ë‹´ê²¨ìˆê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ëŠ” í•´ë‹¹ ì‚¬ì´íŠ¸ì— ëŒ€í•œ ëª¨ë“  Request ì— Session Id ë¥¼ ì¿ í‚¤ì— ë‹´ì•„ ì „ì†¡í•œë‹¤.
- ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ Session Id ì™€ ì„œë²„ ë©”ëª¨ë¦¬ë¡œ ê´€ë¦¬í•˜ê³  ìˆëŠ” Session Id ë¥¼ ë¹„êµí•˜ì—¬ Verification ì„ ìˆ˜í–‰í•œë‹¤.

#### ì¥ì ‘

1.  ì¿ í‚¤ëŠ” ì„¸ì…˜ ì €ì¥ì†Œì— ë‹´ê¸´ ìœ ì € ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ì—´ì‡ ì´ì§€ë§Œ ë§Œì¼ì˜ HTTP ìš”ì²­
    ë„ì¤‘ì— Cookie ê°€ ë…¸ì¶œë˜ë”ë¼ë„ ì¿ í‚¤ì— í¬í•¨ëœ ì„¸ì…˜ IDëŠ” ì˜ë¯¸ì—†ëŠ” ê°’ìœ¼ë¡œ ë³¸ë‹¤.
    ë•Œë¬¸ì— ì´ˆê¸° ì¸ì¦ë°©ì‹ì˜ ê³„ì •ì •ë³´ ì¸ì¦ ë°©ì‹ ë³´ë‹¤ëŠ” ì•ˆì „í•˜ë‹¤ê³  ë³¸ë‹¤.

2. ëª¨ë“  ì‚¬ìš©ìê°€ ì„œë¡œë‹¤ë¥¸ Session IDë¥¼ ë°œê¸‰ë°›ê²Œ ë˜ë©° í´ë¼ì´ì–¸íŠ¸ëŠ” ë³„ë„ì˜ ì‚¬ìš©ì ì¡°íšŒ ì—†ì´ë„ Session IDë¥¼ í†µí•´ ì‚¬ìš©ì
   ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ ì„œë²„ì˜ ìì›ì— ì ‘ê·¼ì„±ì´ ë¹ ë¥´ë‹¤.

#### ë‹¨ì 

1. ì„¸ì…˜ í•˜ì´ì¬í‚¹ ê³µê²©
  HTTPì˜ Cookieê°€ ë…¸ì¶œë˜ì–´ë„ Session ID ìì²´ì  ì˜ë¯¸ëŠ” ì—†ì§€ë§Œ í•´ì»¤ê°€ SessionIDë¥¼ ì•…ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ê¶Œí•œìœ¼ë¡œ
   í´ë¼ì´ì–¸íŠ¸ì— ì ‘ê·¼ í•˜ì—¬ ì •ë³´ë¥¼ íƒˆì·¨í•  ìœ„í—˜ì„±ì´ ìˆë‹¤. ì¦‰ íƒ€ì¸ì˜ ê¶Œí•œ(SessionID)ìœ¼ë¡œ ì•…ìš©ê°€ëŠ¥ì„±ì´ ìˆë‹¤.
   

![Session / Cookie ë°©ì‹](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fbe5HFu%2FbtqAsR8iEdh%2Frk9Xno6XlQAwbTWFiGIXIk%2Fimg.png)

### Token (JWT)

ì¸ì¦ë°›ì€ ì‚¬ìš©ìë“¤ì—ê²Œ Tokenì„ ë°œê¸‰í•˜ê³ , ì„œë²„ì— ìš”ì²­ì„ í•  ë•Œ Header ì— Tokenì„ í•¨ê»˜ ë³´ë‚´ë„ë¡ í•˜ì—¬ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤. 
ì´ëŸ¬í•œ ì‹œìŠ¤í…œì—ì„œëŠ” ë”ì´ìƒ ì‚¬ìš©ìì˜ ì¸ì¦ ì •ë³´ë¥¼ ì„œë²„ë‚˜ ì„¸ì…˜ì— ìœ ì§€í•˜ì§€ ì•Šê³  í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ë§Œìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.
ì¦‰, Session / Cookie ë°©ì‹ê³¼ ë‹¬ë¦¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•ŠëŠ” êµ¬ì¡°ì´ë‹¤. 
ì´ëŸ¬í•œ í† í° ê¸°ë°˜ì˜ ì¸ì¦ ë°©ì‹ì„ í†µí•´ ìˆ˜ë§ì€ ë¬¸ì œì ë“¤ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ”ë°, ëŒ€í‘œì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì´ ë˜ì–´ìˆëŠ”ì§€ ì•ˆë˜ì–´ìˆëŠ”ì§€ ì‹ ê²½ì“°ì§€ ì•Šê³  ì†ì‰½ê²Œ 
ì‹œìŠ¤í…œì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.

- ìœ ì €ê°€ ë¡œê·¸ì¸ì„ í•˜ê³  ì„œë²„ì— ì„¸ì…˜ì„ ì´ìš©í•´ì„œ ì •ë³´ë¥¼ ê¸°ë¡í•˜ëŠ”ëŒ€ì‹ , Token ì„ ë°œê¸‰í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ëŠ” ë°œê¸‰ëœ Token ì„ ì €ì¥í•œë‹¤ (ì¼ë°˜ì ìœ¼ë¡œ local storage ì— ì €ì¥í•œë‹¤.)
- í´ë¼ì´ì–¸íŠ¸ëŠ” ìš”ì²­ ì‹œ ì €ì¥ëœ Token ì„ Header ì— í¬í•¨ì‹œì¼œ ë³´ë‚¸ë‹¤.
- ì„œë²„ëŠ” ë§¤ ìš”ì²­ì‹œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì „ë‹¬ë°›ì€ Header ì˜ Token ì •ë³´ë¥¼ Verification í•œ ë’¤, í•´ë‹¹ ìœ ì €ì— ê¶Œí•œì„ ì¸ê°€í•œë‹¤.

### ì¥ì 
1. ì„¸ì…˜/ì¿ í‚¤ëŠ” ë³„ë„ì˜ ì €ì¥ì†Œì˜ ê´€ë¦¬ê°€ í•„ìš”í•˜ì§€ë§Œ JWTëŠ” ë°œê¸‰í•œ í›„ ê²€ì¦ë§Œ í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ ì €ì¥ì†Œê°€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.
   ì´ëŠ” ë¹„ìƒíƒœìœ ì§€ ì„œë²„ì˜ íŠ¹ì§•ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ StatelessëŠ” ì–´ë– í•œ ë³„ë„ì˜ ì €ì¥ì†Œë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”, ì¦‰ ìƒíƒœë¥¼ ì €ì¥í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

2. í™•ì¥ì„±ì´ ìš°ìˆ˜í•˜ì—¬ Token ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ë‹¤ë¥¸ ì¸ì¦ ì‹œìŠ¤í…œì— ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. 
   ì˜ˆë¥¼ ë“¤ì–´ Facebook ë¡œê·¸ì¸, Google ë¡œê·¸ì¸ Kakao ë¡œê·¸ì¸(**OAuth 2.0**) ë“±ì€ ëª¨ë‘ í† í°ì„ ê¸°ë°˜ìœ¼ë¡œ ì¸ì¦ì„ í•©ë‹ˆë‹¤.
   
> * OAut??
> 
> ì¸í„°ë„· ì‚¬ìš©ìë“¤ì´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œê³µí•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ ìƒì˜ ìì‹ ë“¤ì˜ ì •ë³´ì— ëŒ€í•´ ì›¹ì‚¬ì´íŠ¸ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•  ìˆ˜ ìˆëŠ” 
> ê³µí†µì ì¸ ìˆ˜ë‹¨ìœ¼ë¡œì„œ ì‚¬ìš©ë˜ëŠ”, ì ‘ê·¼ ìœ„ì„ì„ ìœ„í•œ ê°œë°©í˜• í‘œì¤€ì´ë‹¤.

ì—¬ê¸°ê¹Œì§€ì˜ ê¸€ë§Œ ë´¤ì„ ë•ŒëŠ” JWTê°€ ì„¸ì…˜/ì¿ í‚¤ ë°©ì‹ë³´ë‹¤ ë” íš¨ìœ¨ì ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ JWTë„ ë‹¨ì ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.

#### ë‹¨ì 

1. ì´ë¯¸ ë°œê¸‰ëœ JWTì— ëŒ€í•´ì„œëŠ” ìˆ˜ì • / ì‚­ì œê°€ ë¶ˆê°€í•˜ì—¬ JWTëŠ” í•œ ë²ˆ ë°œê¸‰ë˜ë©´ ìœ íš¨ê¸°ê°„ì´ ì™„ë£Œë  ë•Œ ê¹Œì§€ëŠ” ê³„ì† ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
   ì´ëŸ¬í•œ ê²°ê³¼ë¡œ í—¤ì»¤ëŠ” ìœ íš¨ê¸°ê°„ì´ ì§€ë‚˜ê¸° ì „ê¹Œì§€ ê¶Œí•œì„ íƒˆì·¨í•˜ì—¬ ë§Œë£Œì „ê°€ì§€ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
   
> * í•´ê²°ì±…
>  
> ê¸°ì¡´ì˜ Access Tokenì˜ ìœ íš¨ê¸°ê°„ì„ ì§§ê²Œ í•˜ê³  Refresh Tokenì´ë¼ëŠ” ìƒˆë¡œìš´ í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤. 
> ê·¸ë ‡ê²Œ ë˜ë©´ Access Tokenì„ íƒˆì·¨ë‹¹í•´ë„ ìƒëŒ€ì ìœ¼ë¡œ í”¼í•´ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. PayloadëŠ” ë”°ë¡œ ì•”í˜¸í™”ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë””ì½”ë”©í•˜ë©´ ëˆ„êµ¬ë‚˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
   (ì„¸ì…˜/ì¿ í‚¤ ë°©ì‹ì—ì„œëŠ” ìœ ì €ì˜ ì •ë³´ê°€ ì „ë¶€ ì„œë²„ì˜ ì €ì¥ì†Œì— ì•ˆì „í•˜ê²Œ ë³´ê´€ë©ë‹ˆë‹¤) ë”°ë¼ì„œ ìœ ì €ì˜ ì¤‘ìš”í•œ ì •ë³´ë“¤ì€ Payloadì— ë„£ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

3. ì¸ì¦ì´ í•„ìš”í•œ ìš”ì²­ì´ ë§ì•„ì§ˆ ìˆ˜ë¡ ì„œë²„ì˜ ìì›ë‚­ë¹„ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.


![Token ë°©ì‹](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FogoAg%2FbtqAriyT5sY%2FYYt2wkEz50kKN47mLwRDXK%2Fimg.png)


[SPRING ë³´ì•ˆ ì¸ì¦](https://kim-js-95.github.io/2021/07/02/JWT_1.html)

[SPRING ë³´ì•ˆ ì¸ì¦ êµ¬í˜„](https://kim-js-95.github.io/2021/07/02/JWT_2.html)

---

### ğŸ§¾Reference
1. [Session ê¸°ë°˜ ì¸ì¦ê³¼ Token ê¸°ë°˜ ì¸ì¦](https://jins-dev.tistory.com/entry/Session-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D%EA%B3%BC-Token-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D)
2. [Session / Cookie ë°©ì‹](https://tansfil.tistory.com/58)
3. [í† í° ê¸°ë°˜ ì¸ì¦ VS ì„œë²„ ê¸°ë°˜ ì¸ì¦](https://mangkyu.tistory.com/55)
4. [OAuth](https://ko.wikipedia.org/wiki/OAuth)
