---
layout: post 
title:  "Spring ICO / DI - ì˜ì¡´ì„± ì£¼ì… í¸"
date:   2022-03-25 12:05:21 +0800 
tags: ìŠ¤í”„ë§ 
color: rgb(98,170,255)
subtitle: ì˜ì¡´ì„± ì£¼ì… DIì— ëŒ€í•´ ì•Œì•„ë³´ì
--- 

## ğŸš€ ì˜ì¡´ì„±ê´€ê³„ì£¼ì…

### ğŸŒ  Spring ICO (Inversion Of Control)

ìŠ¤í”„ë§ì—ì„œ ì¼ë°˜ì ì¸ Java ê°ì²´ë¥¼ `new`ë¡œ ìƒì„±í•˜ì—¬ ê°œë°œìê°€ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ `Spring Container`ì— ëª¨ë‘ ë§¡ê¸´ë‹¤.

ë”°ë¼ì„œ ê°œë°œìì˜ ì§ì ‘ ê´€ë¦¬ ì—†ì—†ë„ **`Spring Container`ëŠ” ê°ì²´ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œë˜ë©° ê°œë°œìê°€ ì›í•˜ëŠ” ìš”ì²­ì— ë”°ë¼ `DI`ì˜ ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.**

> ê°œë°œì ì¤‘ì‹¬ì˜ ê´€ë¦¬ â¡ í”„ë ˆì„ì›Œí¬ ì¤‘ì‹¬ì˜ ê°ì²´ê´€ë¦¬ ê¶Œí•œ ì œê³µ

ê·¸ë ‡ë‹¤ë©´ **`Spring Container`ê°€ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ë©´ ê°œë°œìëŠ” ì–´ë–»ê²Œ `Container`ë¡œ ë¶€í„° ê°ì²´ë¥¼ ê°€ì ¸ì™€ì•¼í• ê¹Œ?**

### ğŸŒ  DI (Dependency Injection)

`DI`ëŠ” `Spring Container`ê°€ ê´€ë¦¬ì¤‘ì¸ ê°ì²´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤.


#### â˜„ DI ì¥ì 

- ì˜ì¡´ì„±ìœ¼ë¡œ ë¶€í„° ê²©ë¦¬ì‹œì¼œ ì½”ë“œ í…ŒìŠ¤íŠ¸ì— ìš©ì´í•˜ë‹¤.
- DIë¥¼ í†µí•˜ì—¬, ë¶ˆê°€ëŠ¥í•œ ìƒí™©ì„ Mockì™€ ê°™ì€ ê¸°ìˆ ì„ í†µí•˜ì—¬, ì•ˆì •ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.
- ì½”ë“œë¥¼ í™•ì¥í•˜ê±°ë‚˜ ë³€ê²½ í•  ë•Œ ì˜í–¥ì„ ìµœì†Œí™” í•œë‹¤. (ì¶”ìƒí™”)
- ìˆœí™˜ ì°¸ì¡°ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤.

### DI - ì ìš© ì „

```java
public interface IEncoder {
    String encode(String message);
}

public class Encoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

public class UrlEncoder implements IEncoder {
    @java.lang.Override
    public String encode(String message) {
        try {
            return UrlEncoder.encode(message, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return null;
        }
    }
}

public class Base64Encoder implements IEncoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

public class Main() {
    public static void main(String[] args) {
        String url = "www.google.com";
        
        // TODO: í˜¸ì¶œ
        IEncoder encoder = new Base64Encoder();
        IEncoder urlEncoder = new UrlEncoder();

        String result = encoder.encode(url);
        String URLresult = urlEncoder.encode(url);
    }
}
```

ì–´ë–¤ ë¬¸ì œê°€ ë³´ì¼ê¹Œ?

ì½”ë“œ ìì²´ëŠ” ì–´ë– í•œ ë¬¸ì œë„ ì—†ë‹¤ . í›Œë¥­í•˜ê²Œ ì¶”ìƒí™” ê¹Œì§€ ì ìš©í•˜ì—¬ ê¹”ë”í•œ ëª¨ìŠµì´ê² ì§€ë§Œ
ì˜¤ëŠ˜ì˜ ëª©ì ì¸ `ICO / DI`ê°€ ì ìš©ë˜ì–´ ìˆì§€ ì•Šì•„ `Spring`ìŠ¤ëŸ½ì§€ ëª»í•˜ë‹¤.

`main()`í´ë˜ìŠ¤ ì—ì„œ í˜¸ì¶œë˜ëŠ” ê°ì²´ë¥¼ `Spring Container`ê°€ ì§ì ‘ ê´€ë¦¬í•˜ê³  ì£¼ì…(í˜¸ì¶œ) í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ë³´ì

### IOC / DI - ì ìš© í›„

ìŠ¤í”„ë§ì€ ê°ì²´ì˜ í˜¸ì¶œì„ ë°˜ë³µì ìœ¼ë¡œ í•˜ëŠ” ê²ƒì„ êµ‰ì¥íˆ ì‹«ì–´í•œë‹¤.

ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì‹«ì–´í•œë˜ ê°œë°œìëŠ” ìƒê°í–ˆë‹¤.

> ìƒì„±ìë¥¼ ê°ì²´ì— ì§ì ‘ ì£¼ì…í•´ë³¼ê¹Œ?

```java

// TODO: ì „
public class Encoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

// TODO: í›„
public class Encoder {
    
    private IEncoder iEncoder;
    
    public Encoder(){
        this.iEncoder = new Base64Encoder();
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}

```

`UrlEncoder`, `Base64Encoder` í´ë˜ìŠ¤ì— ìƒì†í•˜ë˜ `IEncoder`ì¸í„°í˜ì´ìŠ¤ë¥¼ `Encoder`í´ë˜ìŠ¤ì— ìƒì„±ìë¡œ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤.

ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

```java
public interface IEncoder {
    String encode(String message);
}

// TODO: ì¤‘ìš”í•œ ë¶€ë¶„
public class Encoder {

    private IEncoder iEncoder;

    public Encoder(){
        this.iEncoder = new Base64Encoder();
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}

public class UrlEncoder implements IEncoder {
    @java.lang.Override
    public String encode(String message) {
        try {
            return UrlEncoder.encode(message, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            return null;
        }
    }
}

public class Base64Encoder implements IEncoder {
    public String encode(String message) {
        return Base64Encoer.getEncoer()
                .encodeToString(message.getByres());
    }
}

public class Main() {
    public static void main(String[] args) {
        String url = "www.google.com";
        // TODO: ìƒì„±ì í˜¸ì¶œ
        Encoder encoder = new Encoder();

        // ê¸°ë³¸ ìƒì„±ìì˜ ë°˜í™˜ê°’ì€ Base64
        String result = encoder.encode(url);
    }
}
```

**ë§Œì¼ ì¸ì½”ë”©ì˜ ì¢…ë¥˜ë¥¼ ë°”ê¿”ì•¼ í•œë‹¤ë©´ ì–´ë–¨ê¹Œ?**

```java
public class Encoder {

    private IEncoder iEncoder;

    public Encoder(){
        //this.iEncoder = new Base64Encoder();
        this.iEncoder = new UrlEncoder();
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}
```

`Encoder`ì˜ ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ìƒì„±ì í˜¸ì¶œì„ ë°”ê¿”ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

**ì¡°ê¸ˆë” íš¨ìœ¨ì ìœ¼ë¡œ ìƒê°í•´ë³´ì**

ë§¤ë²ˆ í•„ìš”í•  ë•Œë§ˆë‹¤  `í•µì‹¬ í´ë¼ìŠ¤(Encoder)`ë¥¼ ê±´ë“¤ì´ëŠ” ê²ƒì€ ì¢‹ì€ ê°œë°œ ì¼ê¹Œ?

**ì´ëŸ¬í•œ ë¶ˆí¸í•¨ì„ í•œë²ˆë” ê°œì„ í•  í•„ìš”ê°€ ìˆìœ¼ë©° ê·¸ê²ƒì„ `ì˜ì¡´ì„± ì£¼ì…`ì„ í†µí•´ ê°œì„ ì´ ê°€ëŠ¥í•˜ë‹¤.**

```java

// TODO: ì˜ì¡´ì„± ì£¼ì… í›„
public class Encoder {

    private IEncoder iEncoder;
    
    //TODO: í˜¸ì¶œí•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ Encoder ìì²´ì— ì£¼ì…í–ˆë‹¤.
    public Encoder(IEncoder iEncoder){
        this.iEncoder=iEncoder;
    }
    public String encode(String message) {
        return iEncoder.encode(message);
    }
}

public class Main() {
    public static void main(String[] args) {
        String url = "www.google.com";
        // TODO: ìƒì„±ì í˜¸ì¶œ
        Encoder encoder = new Encoder(new Base64Encoder());

        // ê¸°ë³¸ ìƒì„±ìì˜ ë°˜í™˜ê°’ì€ Base64
        String result = encoder.encode(url);
    }
}
```

`ì˜ì¡´ì„± ì£¼ì…`ì˜ ë§ ê·¸ëŒ€ë¡œ **ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ì£¼ì…**í•˜ì˜€ìœ¼ë©° 
ê²°ê³¼ì ìœ¼ë¡œ í™•ì¥ì„±ê³¼ ì•ˆì •ì„±ì—ì„œ ê°œì„ ì´ ë˜ì—ˆë‹¤. 

ì¦‰, **í•µì‹¬ ì½”ì–´ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šì•„ë„ ì™¸ë¶€ í´ë˜ìŠ¤ì—ì„œ ê°ì²´ë§Œ ë°”ê¿”ì£¼ëŠ” ê²ƒì„ ì‘ë™ì´ ê°€ëŠ¥í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.**

ë‹¤ìŒì€ `Spring IOC`ì— ëŒ€í•´ í¬ìŠ¤íŒ… í•œë‹¤.

## ğŸ§¾ Reference
- [ì±… - ìŠ¤í”„ë§ì„ ì…ë¬¸ì„ ìœ„í•œ ìë°” ê°ì²´ ì§€í–¥ì˜ ì›ë¦¬ì™€ ì´í•´](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=55641908)
- [í•œ ë²ˆì— ëë‚´ëŠ” Java/Spring ì›¹ ê°œë°œ ë§ˆìŠ¤í„° ì´ˆê²©ì°¨ íŒ¨í‚¤ì§€ Online.]()
