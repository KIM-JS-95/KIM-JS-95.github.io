---
layout: post
title:  "Spring Swagger"
date:   2022-01-31 12:05:21 +0800
tags: Spring-Cloud
color: rgb(154,133,255)
subtitle: API ë¬¸ì„œ ê°œë°œì„ í¸ë¦¬í•˜ê²Œ
--- 

## ğŸš€ What is Swagger?

Swaggerë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ê³„ê°€ ì½ì„ ìˆ˜ ìˆë„ë¡ APIì˜ êµ¬ì¡°ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.
ì •ë¦¬í•˜ìë©´ ìš°ë¦¬ê°€ ë³„ë„ë¡œ `UI`ë¥¼ HTML íŒŒì¼ë¡œ ì œì‘í•˜ì§€ ì•Šì•„ë„ `Swegger` ì—ì„œ í•„ìš”í•œ ë¬¸ì„œ í˜•íƒœë¥¼ ëª¨ë‘ ì œê³µí•˜ê³  ê²°ê³¼ê°’ ë˜í•œ ë³´ì—¬ì£¼ëŠ” íˆ´ì´ë‹¤.

[Swgger ê³µì‹ í™ˆí˜ì´ì§€](https://swagger.io/docs/specification/2-0/what-is-swagger/)


### í”„ë¡œì íŠ¸ ì˜ˆì‹œ

`Spring Cloud` í”„ë¡œì íŠ¸ì— ë“¤ì–´ê°€ê¸°ì „ì— `APIë¬¸ì„œ`ë¥¼ ë³„ë„ë¡œ ë§Œë“¤ í•„ìš”ì—†ì´ ë¹ ë¥¸ ê°œë°œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” íˆ´ì„ ì„¤ì •í•œë‹¤.

#### Controller êµ¬í˜„

```java
@Api
@RestController
public class FileUploadController {

    @Autowired
    FileUploadService fileUploadService;

    @ApiOperation("ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ")
    @PostMapping("/v1.0/upload/image")
    public ImageFileUploadResult transfer(
            @RequestParam("userKey") String userKey,
            @RequestPart("imageFile") MultipartFile multipartFile) {
        ImageFile imageFile = fileUploadService.upload(multipartFile);
        return ImageFileUploadResult.builder()
                .fileName(imageFile.getFileName())
                .fileId(imageFile.getFileId())
                .fileSize(imageFile.getFileSize())
                .build();
    }
}

```

|ì–´ë…¸í…Œì´ì…˜|ì„¤ëª…|
|:---:|:---:|
|@Api|í´ë˜ìŠ¤ë¥¼ Swagger ë¦¬ì†ŒìŠ¤ ëŒ€ìƒìœ¼ë¡œ í‘œì‹œ|
|@ApiOperation|ìš”ì²­ URL ì— ë§¤í•‘ëœ API ì— ëŒ€í•œ ì„¤ëª…|
|@ApiParam|ìš”ì²­ Parameterì— ëŒ€í•œ ì„¤ëª… ë° í•„ìˆ˜ì—¬ë¶€, ì˜ˆì œê°’ ì„¤ì •|
|@ApiResponse|ì‘ë‹µì— ëŒ€í•œ ì„¤ëª…|

#### Swagger Config

`Swagger`ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ë³¸ ì„¤ì •ì„ í•„ìš”ë¡œí•œë‹¤.

- ì°¸ì¡°
  - [Swagger Documentation](https://swagger.io/docs/open-source-tools/swagger-ui/usage/configuration/?sbsearch=.defaultModelExpandDepth)

```java
@Configuration
@EnableSwagger2
public class SwaggerConfig {
    @Bean
    public UiConfiguration uiConfig() {
        return UiConfigurationBuilder.builder()
                .deepLinking(true)
                .displayOperationId(false)
                .defaultModelExpandDepth(3)
                .defaultModelExpandDepth(3)
                .docExpansion(DocExpansion.LIST)
                .displayRequestDuration(false)
                .supportedSubmitMethods(UiConfiguration.Constants.DEFAULT_SUBMIT_METHODS)
                .validatorUrl(null)
                .build();
    }

    @Bean
    public Docket api() {
        return new Docket(DocumentationType.SWAGGER_2)
                .groupName("photo api")
                .apiInfo(apiInfo())
                .select()
                .apis(RequestHandlerSelectors.withMethodAnnotation(ApiOperation.class))
                .paths(PathSelectors.any())
                .build();
    }


    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                .title("photo upload api")
                .description("ì‚¬ì§„ ì—…ë¡œë“œ api")
                .version("1.0.0")
                .build();
    }
}

```

ì•„ë˜ í˜ì´ì§€ì—ì„œ ì‚¬ìš©ìê°€ í•„ìš”ë¡œ í•˜ëŠ” ì„¤ì •ì„ êµ¬ì„± í›„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- [Swagger Editor](https://editor.swagger.io/)


### ì •ë¦¬
`Swagger`ëŠ” APIë¥¼ êµ¬í˜„ì„ ë„ì™€ì£¼ëŠ” `Tool`ì¼ ë¿ì´ë©° í•„ìš”í• ë•Œ ë¬¸ì„œë¥¼ ì°¾ì•„ì„œ êµ¬í˜„í•˜ë©´ ë˜ê² ë‹¤. 

<u>ì‹œê°„ë‚´ì„œ ê³µë¶€í•  í•„ìš”ì„±ì€ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.</u>

### ğŸ§¾Reference
[Spring Cloud](https://www.baeldung.com/spring-cloud-configuration)

[Swegger ê¸°ë³¸ ì‚¬ìš©ë²•](https://leeys.tistory.com/29)

[Swagger Editor](https://editor.swagger.io/)